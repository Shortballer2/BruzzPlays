<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Bruzz 3D: v0.3 (God Mode)</title>
    <style> 
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Courier New', monospace; } 
        .ui-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 280px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            padding: 20px;
            border-radius: 12px;
            z-index: 100;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .slider-group { margin-bottom: 15px; }
        .slider-group label { display: block; font-size: 11px; color: #94a3b8; margin-bottom: 5px; text-transform: uppercase; font-weight: bold;}
        .slider-group input { width: 100%; accent-color: #3b82f6; cursor: pointer; }
        .btn {
            background: #3b82f6; border: none; color: white; width: 100%; padding: 10px;
            border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 10px;
            transition: background 0.2s;
        }
        .btn:hover { background: #2563eb; }
        .tag { font-size: 10px; background: #334155; padding: 2px 6px; border-radius: 4px; float: right; }
    </style>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- GAME SETTINGS COMPONENT ---
        function GameOverlay({ settings, setSettings, resetGame }) {
            const handleChange = (key, val) => setSettings(s => ({...s, [key]: parseFloat(val)}));

            return (
                <div className="ui-panel">
                    <h2 style={{margin:'0 0 20px 0', fontSize:'18px', borderBottom:'1px solid #333', paddingBottom:'10px'}}>
                        GOD MODE <span className="tag">v0.3</span>
                    </h2>

                    <div className="slider-group">
                        <label>Player Speed <span className="tag">{settings.speed.toFixed(1)}x</span></label>
                        <input type="range" min="0.1" max="2.0" step="0.1" value={settings.speed} onChange={(e)=>handleChange('speed', e.target.value)} />
                    </div>

                    <div className="slider-group">
                        <label>Player Height (Scale) <span className="tag">{settings.height.toFixed(2)}m</span></label>
                        <input type="range" min="0.8" max="1.5" step="0.05" value={settings.height} onChange={(e)=>handleChange('height', e.target.value)} />
                    </div>

                    <div className="slider-group">
                        <label>AI IQ (Reaction Time) <span className="tag">{settings.iq.toFixed(0)}%</span></label>
                        <input type="range" min="10" max="100" step="10" value={settings.iq} onChange={(e)=>handleChange('iq', e.target.value)} />
                    </div>

                    <div className="slider-group">
                        <label>Defense Aggression</label>
                        <input type="range" min="0" max="100" step="10" value={settings.aggression} onChange={(e)=>handleChange('aggression', e.target.value)} />
                    </div>

                    <button className="btn" onClick={resetGame}>RESET POSITIONS</button>
                    
                    <div style={{marginTop: '20px', fontSize: '10px', color: '#666'}}>
                        WASD to Move â€¢ Hold Shift to Sprint
                    </div>
                </div>
            );
        }

        // --- 3D ENGINE ---
        function Game3D() {
            const mountRef = useRef(null);
            
            // Global Settings State
            const [settings, setSettings] = useState({
                speed: 1.0,
                height: 1.0,
                iq: 80,
                aggression: 50
            });

            // Game Logic State
            const gameState = useRef({
                players: [
                    { id: 0, x: 0, z: 25, team: 'us', role: 'PG', color: 0x3b82f6, targetX: 0, targetZ:
